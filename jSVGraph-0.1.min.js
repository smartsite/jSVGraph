document.jSVGraph=function(e,t,n,r,i,s,o,u,a,f){"use strict";if(!e){return null}e="";this.width=t||{};this.height=n||{};this.type=r||{};this.element=e;this.series=[];this.chartLabels=[];this.axisColor=i;this.borderColor=u;this.gradientColor1=s;this.gradientColor2=o;this.gridColor=a;this.textColor=f;this.axisWidth="1px";this.svg_source="";this.bottomPadding=60;this.topLeftX=20;this.topLeftY=20;this.graphPadding=40;this.setup()};document.jSVGraph.prototype={setup:function(e){"use strict";this.svg_source='<svg id="svgelem" height="'+this.height+'" width="'+this.width+'" xmlns="http://www.w3.org/2000/svg" version="1.1" >';this.svg_source+="<defs>"+this.addGradient("grad1",0,0,0,100,this.gradientColor1,this.gradientColor2)+"</defs>";this.rectangle(0,0,this.width,this.height,"0","",this.borderColor,"","5","5");this.rectangle(this.topLeftX,this.topLeftY,this.width-this.graphPadding,this.height-this.bottomPadding,"0","","","#grad1","","");this.axes(this.axisColor);this.grid(10,10,this.topLeftY,false,true,this.gridColor,"0.5")},line:function(e,t,n,r,i,s,o){"use strict";var u='<line x1="'+e+'" y1="'+t+'" x2="'+n+'" y2="'+r+'" style="stroke:'+s+";stroke-width:"+i+'" />'+"\r\n";this.svg_source+=u;return u},dashedLine:function(e,t,n,r,i,s,o){"use strict";var u,a,f=0,l=true,c,h,p=o.length,d="",v=n-e,m=r-t;if(!o){o=[5,10]}if(u===0){u=.001}d+="M "+e+" "+t;h=m/v;a=Math.sqrt(v*v+m*m);while(a>=.1){u=o[f++%p];if(u>a){u=a}c=Math.sqrt(u*u/(1+h*h));if(v<0){c=-c}e+=c;t+=h*c;if(l){d+=" L "+e+" "+t+" "+(e+c)+" "+(t+h*c)}else{d+=" M "+e+" "+t}a-=u;l=!l}this.svg_source+=this.simplePath(d,s,i,i,"")},rectangle:function(e,t,n,r,i,s,o,u,a,f){"use strict";var l="",c='<rect x="'+e+'" y="'+t+'" width="'+n+'" height="'+r+'" ';if(u!==""){l+='style="fill:url('+u+");"}else{l+='style="fill:'+o+";"}if(a!==""){c+='rx="'+a+'" '}if(f!==""){c+='ry="'+f+'" '}l+=" stroke:"+s+";stroke-width:"+i;c+=l+';"/>';this.svg_source+=c;return c},circle:function(e,t,n,r,i,s){"use strict";var o="";o+='<circle cx="'+e+'" cy="'+t+'" r="'+n+'" stroke="'+r+'" stroke-width="'+i+'" fill="'+s+'"/>';this.svg_source+=o;return o},simplePath:function(e,t,n,r,i){"use strict";var s="<path ";if(i!==""){s+='stroke-dasharray="'+i+'"'}s+=' d="'+e+'" fill = "'+r+'" stroke = "'+n+'" stroke-width="'+t+'"/>';return s},grid:function(e,t,n,r,i,s,o){"use strict";var u,a,f="",l=10+t,c=parseInt((this.height-this.bottomPadding)/e,10);for(u=0;u<e;u++){a=c*u+n;f+=this.dashedLine(l,a,this.width-20,a,s,"0.5",[1,5])}this.svg_source+=f;return f},point:function(e,t,n,r,i){"use strict";},dataPoint:function(e,t){"use strict";},text:function(e,t,n,r,i,s,o){"use strict";var u='<text x="'+t+'" y="'+n+'" fill="'+s+'" font-family="'+r+'" font-size="'+i+'" ';if(o!==""){u+='transform="'+o+'" '}u+=">"+e+"</text>";this.svg_source+=u;return u},axis:function(e){"use strict";if(e==="horizontal"){this.line(this.topLeftX,this.height-this.graphPadding,this.width-this.topLeftX,this.height-this.graphPadding,this.axisWidth,this.axisColor,"solid")}if(e==="vertical"){this.line(this.topLeftX,20,this.topLeftX,this.height-this.graphPadding,this.axisWidth,this.axisColor,"solid")}},axes:function(e){"use strict";this.axis("vertical");this.axis("horizontal")},axiscolor:function(e,t){"use strict";this.axis.color=e},ticks:function(e,t){"use strict";var n="";if(e==="horizontal"){n=this.dashedLine(this.topLeftX,this.height-38,this.width-15,this.height-38,this.axisColor,"5px",[1,t])}if(e==="vertical"){n=""}this.svg_source+=n},lables:function(e){"use strict";var t=10,n,r,i,s;for(s=0;s<e.length;s++){this.chartLabels[s]=e[s]}if(this.chartLabels[1]){n=parseInt((this.width-10)*.5-t*this.chartLabels[1].length*.2,10);r=this.height-(20-t);this.text(this.chartLabels[1],n,r,"Arial",t,this.textColor,"")}if(this.chartLabels[2]){r=15-this.width;n=100;this.text(this.chartLabels[2],n,r,"Arial",t,this.textColor,"rotate(90 0 0)")}if(this.chartLabels[0]){i=this.chartLabels[0];this.text(i,this.width/2-i.length*2.75,15,"Verdana",12,this.textColor,"rotate(0,0,0)")}},addXValues:function(e,t,n,r){"use strict";var i=1,s,o,u;u=parseInt((this.width-35)/e.length,10);for(o=0;o<e.length;o++){s=o*(u+1)+r;if(i===t){if(o+n<e.length){this.text(e[o+n],s,this.height-25,"Verdana",10,this.textColor,"")}i=0}i++}this.ticks("horizontal",u)},plotSeries:function(e,t,n,r,i,s){"use strict";var o="",u="0 0",a,f,l,c,h;h=this.graphMetrics();for(a=0;a<e.data.length;a++){f=e.data[a];l=parseInt(a*h.xstep+this.topLeftX,10);c=190-(f-h.min)*h.yscale;o+=l+" "+c+" ";if(a===0){u=l+" "+c+" "}}this.text(h.min,3,h.height+this.topLeftY-20,"Arial",12,"#000000","");this.text(h.max,3,this.height-this.topLeftY-h.height+5,"Arial",12,"#000000","");this.svg_source+=this.simplePath("M "+u+" L "+o,"2",e.color,"none"," ")},plot:function(e){"use strict";var t;for(t in this.series){this.plotSeries(this.series[t])}},graphMetrics:function(){"use strict";var e,t=[],n={},r,i=0;for(e in this.series){for(r in this.series[e].data){t.push(this.series[e].data[r]);if(this.series[e].data.length>i){i=this.series[e].data.length}}}n.min=Math.floor(Math.min.apply(Math,t));n.max=Math.ceil(Math.max.apply(Math,t));n.width=this.width-this.topLeftX*2;n.height=this.height-(this.topLeftY+this.bottomPadding);n.xstep=Math.round(n.width*100/i)/100;n.yscale=(n.height-2*this.graphPadding)/(n.max-n.min);n.xorigin=this.topLeftX;n.yorigin=this.topLeftY;n.seriesLength=i;return n},addSeries:function(e,t,n,r,i,s){"use strict";this.series[e]=[];this.series[e].data=i;this.series[e].title=t;this.series[e].units=n;this.series[e].color=r;this.series[e].yoffset=s},dropSeries:function(e){"use strict";delete this.series[e]},render:function(){"use strict";this.plot("solid");this.svg_source+="</svg>";this.element.innerHTML=this.svg_source},getSource:function(){"use strict";this.plot("solid");this.svg_source+="</svg>";return this.svg_source},objectSize:function(e){"use strict";var t=0,n;for(n in e){if(e.hasOwnProperty(n)){t++}}return t},addGradient:function(e,t,n,r,i,s,o){"use strict";var u,a,f;a=this.hexToRGB(s);f=this.hexToRGB(o);u='<linearGradient id="'+e+'" x1="'+t+'%" y1="'+n+'%" x2="'+r+'%" y2="'+i+'%">';u+='  	<stop offset="0%" style="stop-color:rgb('+a+');stop-opacity:1" />';u+='		<stop offset="100%" style="stop-color:rgb('+f+');stop-opacity:1" />';u+="	  </linearGradient>";return u},hexToRGB:function(e){"use strict";if(e.charAt(0)==="#"){e=e.replace("#","")}var t=[];if(e.length===6){t=[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}if(e.length===3){t=[parseInt(e.charAt(0),16),parseInt(e.charAt(1),16),parseInt(e.charAt(2),16)]}if(e.length<3||e.length>6){t=[0,0,0]}return t}}
